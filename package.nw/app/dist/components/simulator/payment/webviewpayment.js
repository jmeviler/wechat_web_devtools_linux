"use strict";function init(){var e=require("../../../lib/react.js"),t=require("../../../cssStr/cssStr.js"),a=require("../../../stores/windowStores.js"),s=require("../../../stores/webviewStores.js"),c=e.createClass({displayName:"Webviewpayment",getInitialState:function(){return{lazyLoaded:!1,qrcode:"",uuid:"",qrcodeState:""}},_operatePaymentQrcodeWnd:function(e){"show"===e.type?(this._callback=e.callback,this.setState({show:!0,lazyLoaded:!0,qrcode:e.qrcode,uuid:e.uuid,qrcodeState:e.qrcodeState})):"update"===e.type?this.setState({qrcodeState:e.qrcodeState}):"close"===e.type&&this.setState({show:!1,qrcode:"",uuid:"",qrcodeState:""})},componentDidMount:function(){s.on("OPERATE_PAYMENT_QRCODE_WND",this._operatePaymentQrcodeWnd)},componentWillUnmount:function(){s.removeListener("OPERATE_PAYMENT_QRCODE_WND",this._operatePaymentQrcodeWnd)},closePayment:function(){this.setState({show:!1,qrcode:"",uuid:"",qrcodeState:""}),"function"==typeof this._callback&&(this._callback(),this._callback=null)},render:function(){if(!this.state.lazyLoaded)return null;var s=this.state,c=(s.uuid,s.qrcode),n=s.qrcodeState,r=s.show,o=r?t.displayBlock:t.displayNone,i=a.getUserInfo(),l=i?i.nickName:"";return e.createElement("div",{style:o,className:"payment-wrapper"},e.createElement("div",{className:"payment"},e.createElement("div",{className:"payment-hd"},e.createElement("a",{href:"javascript:;",onClick:this.closePayment,className:"payment-close"},e.createElement("i",{className:"payment-icon-close"}))),e.createElement("div",{className:"payment-bd"},e.createElement("p",{className:"payment-title"},"微信支付测试"),e.createElement("div",{className:"payment-qrcode-wrapper"},e.createElement("img",{className:"payment-qrcode",src:"data:image/png;base64,"+c}),e.createElement("div",{className:"payment-qrcode-scaned",style:4===n?t.displayBlock:t.displayNone},e.createElement("i",{className:"payment-icon-success"}))),e.createElement("p",{className:"payment-tips"},"请用开发者本人微信（",l,"）扫描以上二维码进行支付调试"))))}});_exports=c}var _exports;init(),module.exports=_exports;