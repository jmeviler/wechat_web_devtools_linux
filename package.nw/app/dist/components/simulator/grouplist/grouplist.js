"use strict";function init(){var e=require("../../../lib/react.js"),t=require("../../../cssStr/cssStr.js"),s=require("../../../stores/projectStores.js"),i=require("../../../stores/webviewStores.js"),r=e.createClass({displayName:"GroupList",getInitialState:function(){var e=s.getCurrentProjectConfig();return{lazyLoaded:!1,groupList:e.groupList||[]}},componentDidMount:function(){i.on("SHOW_SHARE_GROUP_LIST",this._onShow),s.on("PROJECT_CONFIG_REFRESHED",this._onConfigRefreshed)},componentWillUnmount:function(){s.removeListener("PROJECT_CONFIG_REFRESHED",this._onConfigRefreshed),i.removeListener("SHOW_SHARE_GROUP_LIST",this._onShow)},_onShow:function(){var e=this;return 0!=this.state.groupList.length&&this.props.shareBtnState.withShareTicket?void this.setState({show:!0,lazyLoaded:!0}):setTimeout(function(){e.props.onSelect&&e.props.onSelect({})},0)},_onConfigRefreshed:function(e){var t=e.groupList||[];this.setState({groupList:t})},handleGroupClick:function(e){var t=e.target.dataset,s=this.state.groupList[t.index];s&&this.props.onSelect&&this.props.onSelect(s),this.setState({show:!1})},hide:function(){this.setState({show:!1})},render:function(){if(!this.state.lazyLoaded)return null;var s=this.state.show?{}:t.displayNone,i=this.state.groupList.map(function(t,s){return e.createElement("li",{className:"simulator-group-item","data-index":s},e.createElement("div",{className:"group-item-avatar"}),e.createElement("div",{className:"group-item-name"},t.room_topic))});return e.createElement("div",{style:s,className:"weui-grouplist-wrapper"},e.createElement("div",{className:"simulator-hd"},e.createElement("div",{className:"simulator-hd-back",onClick:this.hide},e.createElement("i",{className:"simulator-hd-back-icon"}),e.createElement("span",{style:{color:"white"}},"关闭")),e.createElement("h3",{className:"simulator-hd-title"},"发送给朋友"),e.createElement("div",{style:{width:70}})),e.createElement("ul",{className:"simulator-group-list",onClick:this.handleGroupClick},i))}});_exports=r}var _exports;init(),module.exports=_exports;