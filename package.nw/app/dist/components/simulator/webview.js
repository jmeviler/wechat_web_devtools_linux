"use strict";function init(){var e=require("../../lib/react.js"),t=require("../../lib/react-dom.js"),o=require("./webviewheader.js"),s=require("./webviewbody.js"),r=require("./webviewfooter.js"),i=require("./webviewloading.js"),a=require("./share/webviewshare.js"),h=require("./webviewcard.js"),w=require("../../stores/webviewStores.js"),c=require("../../actions/windowActions.js"),n=require("../../cssStr/cssStr.js"),d="#ffffff",p=e.createClass({displayName:"Webview",getInitialState:function(){return{showFooter:!1,showShare:!1,shareOpt:{},webviewID:parseInt(this.props.webviewID),showCard:!1,cardInfo:{}}},goBack:function(e){var o=this.state.webviewID,s=t.findDOMNode(this.refs.container).querySelector(".webviewbody"+o);this.props.goBack(o,s,e)},showFooter:function e(t){var e=void 0===t?!this.state.showFooter:t;this.setState({showFooter:e})},showShare:function(e){this.setState({showShare:e})},_showShareWebview:function(e,t,o){this.setState({showShare:!0,showFooter:!1,shareOpt:{title:o.title,desc:o.desc||o.title,imgUrl:o.img_url,sdkName:t.sdkName}})},_cardSdk:function(e,t,o,s,r){this.setState({showCard:!0,cardInfo:{sdkName:t,data:r,webviewID:e,isHavePurview:s,cardData:o}}),c.disAbleURLBar()},closeCard:function(){this.setState({showCard:!1,cardType:"",cardWebviewID:""}),c.ableURLBar()},componentDidMount:function(){w.on("SHOW_SHARE_WEBVIEW_"+this.state.webviewID,this._showShareWebview),w.on("CRAD_SDK_RES",this._cardSdk)},componentWillUnmount:function(){w.removeListener("SHOW_SHARE_WEBVIEW_"+this.state.webviewID,this._showShareWebview),w.removeListener("CRAD_SDK_RES",this._cardSdk)},render:function(){var t=this.props,w=t.webviewID,c=t.project,p=t.offset,l=t.isTabWebview,u=t.href,b=t.pageJSON,v=t.appJSON,S=t.isMap,f=t.chooseLocation,m=t.closeLocation,g=t.hideBack,D=(t.goBack,t.getSimulatorActions),I=t.postAppRoute,k=t.type,_=t.shareBtnShow,W=t.shareWithTicket,j=b.backgroundColor||v.window.backgroundColor||d,E={width:p.width,backgroundColor:j},B={width:p.width,height:p.height},C=this.props.project?null:e.createElement(h,{showCard:this.state.showCard,cardInfo:this.state.cardInfo,closeCard:this.closeCard}),q=this.props.project?null:e.createElement(a,{webviewID:w,getSimulatorActions:D,show:this.state.showShare,showShare:this.showShare,showFooter:this.showFooter,shareOpt:this.state.shareOpt}),A=this.state.showCard?n.webviewDisplayNone:{};return e.createElement("div",{ref:"container",className:"simulator",style:E},e.createElement("div",{style:A},e.createElement(o,{showRecordWording:this.props.showRecordWording,offset:p,hideBack:g,webviewID:w,project:c,isMap:S,chooseLocation:f,closeLocation:m,pageJSON:b,appJSON:v,goBack:this.goBack,showFooter:this.showFooter}),this.props.topTabDom,e.createElement("div",{className:"simulator-bd",style:B},e.createElement(i,{webviewID:w}),q,e.createElement(s,{type:k,isMap:S,chooseLocation:f,closeLocation:m,offset:p,href:u,webviewID:w,project:c,getSimulatorActions:D,postAppRoute:I,isTabWebview:l,goBack:this.goBack}),e.createElement(r,{shareBtnShow:_,shareWithTicket:W,project:c,offset:p,webviewID:w,getSimulatorActions:D,show:this.state.showFooter,showFooter:this.showFooter}))),C)}});_exports=p}var _exports;init(),module.exports=_exports;