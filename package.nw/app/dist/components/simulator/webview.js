"use strict";function init(){var e=require("../../lib/react.js"),t=require("../../lib/react-dom.js"),o=require("./webviewheader.js"),s=require("./webviewbody.js"),r=require("./webviewfooter.js"),i=require("./webviewloading.js"),a=require("./share/webviewshare.js"),h=require("./webviewcard.js"),c=require("../../stores/webviewStores.js"),n=(require("../../actions/windowActions.js"),require("../../actions/webviewActions.js")),w=require("../../cssStr/cssStr.js"),d="#ffffff",p=e.createClass({displayName:"Webview",getInitialState:function(){return{showFooter:!1,showShare:!1,shareOpt:{},webviewID:parseInt(this.props.webviewID),showCard:!1,cardInfo:{}}},goBack:function(e){var o=this.state.webviewID,s=t.findDOMNode(this.refs.container).querySelector(".webviewbody"+o);this.props.goBack(o,s,e)},footerOperate:function(e){"hide"==e?this.setState({showFooter:!1}):"share"==e&&(this.setState({showFooter:!1}),n.showShareGroupList())},headerOperate:function(e){"showFooter"==e&&this.setState({showFooter:!0})},shareOperate:function(e){"hide"==e&&this.setState({showShare:!1})},_showShareWebview:function(e,t,o){this.setState({showShare:!0,showFooter:!1,shareOpt:{title:o.title,desc:o.desc||o.title,imgUrl:o.img_url,sdkName:t.sdkName}})},_cardSdk:function(e,t,o,s,r){this.setState({showCard:!0,cardInfo:{sdkName:t,data:r,webviewID:e,isHavePurview:s,cardData:o}})},closeCard:function(){this.setState({showCard:!1,cardType:"",cardWebviewID:""})},componentDidMount:function(){c.on("SHOW_SHARE_WEBVIEW_"+this.state.webviewID,this._showShareWebview),c.on("CRAD_SDK_RES",this._cardSdk)},componentWillUnmount:function(){c.removeListener("SHOW_SHARE_WEBVIEW_"+this.state.webviewID,this._showShareWebview),c.removeListener("CRAD_SDK_RES",this._cardSdk)},render:function(){var t=this.props,c=t.webviewID,n=t.project,p=t.offset,l=t.isTabWebview,u=t.href,S=t.pageJSON,b=t.appJSON,v=t.isMap,f=t.chooseLocation,m=t.closeLocation,g=t.hideBack,D=(t.goBack,t.getSimulatorActions),I=t.postAppRoute,O=t.type,_=t.shareBtnState,j=S.backgroundColor||b.window.backgroundColor||d,k={width:p.width,backgroundColor:j},E={width:p.width,height:p.height},W=this.props.project?null:e.createElement(h,{showCard:this.state.showCard,cardInfo:this.state.cardInfo,closeCard:this.closeCard}),C=this.props.project?null:e.createElement(a,{webviewID:c,getSimulatorActions:D,show:this.state.showShare,shareOpt:this.state.shareOpt,shareOperate:this.shareOperate}),q=this.state.showCard?w.webviewDisplayNone:{};return e.createElement("div",{ref:"container",className:"simulator",style:k},e.createElement("div",{style:q},e.createElement(o,{showRecordWording:this.props.showRecordWording,offset:p,hideBack:g,webviewID:c,project:n,isMap:v,chooseLocation:f,closeLocation:m,pageJSON:S,appJSON:b,goBack:this.goBack,headerOperate:this.headerOperate}),this.props.topTabDom,e.createElement("div",{className:"simulator-bd",style:E},e.createElement(i,{webviewID:c}),C,e.createElement(s,{type:O,isMap:v,chooseLocation:f,closeLocation:m,offset:p,href:u,webviewID:c,project:n,getSimulatorActions:D,postAppRoute:I,isTabWebview:l,goBack:this.goBack}),e.createElement(r,{shareBtnState:_,project:n,offset:p,webviewID:c,getSimulatorActions:D,show:this.state.showFooter,footerOperate:this.footerOperate}))),W)}});_exports=p}var _exports;init(),module.exports=_exports;