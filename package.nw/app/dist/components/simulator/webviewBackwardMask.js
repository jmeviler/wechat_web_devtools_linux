"use strict";function init(){var e=require("../../lib/react.js"),t=require("../../cssStr/cssStr.js"),a=require("../../stores/windowStores.js"),r=require("../../actions/windowActions.js"),n=require("../../actions/webviewActions.js"),i=require("../../stores/projectStores.js"),s=require("url"),o=require("querystring"),c=require("../../config/sceneConfig.js"),l=c.sceneData,u=e.createClass({displayName:"WebviewBackwardMask",getInitialState:function(){return{lazyLoaded:!1,show:!1,beta:global.appConfig.isBeta}},_appEnterBackground:function(){this.setState({lazyLoaded:!0,show:!0})},_appEnterForeground:function(){this.setState({show:!1})},componentDidMount:function(){a.on("APP_ENTER_BACKGROUND",this._appEnterBackground),a.on("APP_ENTER_FOREGROUND",this._appEnterForeground)},componentWillUnmount:function(){a.removeListener("APP_ENTER_BACKGROUND",this._appEnterBackground),a.removeListener("APP_ENTER_FOREGROUND",this._appEnterForeground)},onItemClick:function(e){var t=e.currentTarget.dataset,c=t.scene,l=i.getCurrentProject(),u=a.getCurrentWebviewUrl(),d=s.parse(u),p=d.pathname.replace(/^\//,""),m=void 0;if("mini_program"===c&&(m={},l.initPath.enable&&(l.initPath.appid&&(m.appId=l.initPath.appid),l.initPath.referData)))try{m.extraData=JSON.parse(l.initPath.referData)}catch(e){}r.appEnterForeground({scene:c}),n.postMessageToAS({eventName:"onAppEnterForeground",data:{scene:c,path:p||"",referrerInfo:m,query:o.parse(d.query||"")},type:"ON_APPLIFECYCLE_EVENT"})},render:function(){if(!this.state.lazyLoaded)return null;var a=this.state.show?t.displayBlock:t.displayNone,r=[];for(var n in l)r.push(e.createElement("div",{className:"simulator-backward-item","data-scene":n,onClick:this.onItemClick},e.createElement("p",null,n+": "+l[n])));return e.createElement("div",{style:a,className:"simulator-backward-mask"},e.createElement("div",{className:"simulator-backward-dialog",style:this.state.beta?t.displayNone:{}},e.createElement("div",{className:"simulator-backward-dialog-hd"},e.createElement("p",null,"已转为后台运行，可通过以下方式返回前台运行")),e.createElement("div",{className:"simulator-backward-dialog-bd"},e.createElement("div",{className:"simulator-backward-list"},r))))}});_exports=u}var _exports;init(),module.exports=_exports;