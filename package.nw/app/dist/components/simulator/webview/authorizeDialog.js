"use strict";function init(){var e=require("../../../lib/react.js"),t=require("../../../cssStr/cssStr.js"),a=require("../../../stores/windowStores.js"),i=2,l=3,s=e.createClass({displayName:"WebviewAuthorizeDialog",getInitialState:function(){return{appicon_url:"",appname:0,scope_list:[],show:!1,lazyLoaded:!1}},_authorizeSdkShowDialog:function(e){for(var t=e.scope_list,a=e.appicon_url,s=e.appname,o=0;o<t.length;++o){var c=t[o];c.auth_state==l?c.checked=!0:c.checked=c.auth_state==i}this._callback=e.callback,this.setState({lazyLoaded:!0,show:!0,appicon_url:a,appname:s,scope_list:t})},componentDidMount:function(){a.on("WINDOW_SHOW_AUTHORIZE_CONFIRM",this._authorizeSdkShowDialog)},componentWillUnmount:function(){a.removeListener("WINDOW_SHOW_AUTHORIZE_CONFIRM",this._authorizeSdkShowDialog)},handleOnAllow:function(){this.callback(!0)},handleOnCancel:function(){this.callback(!1)},callback:function(e){"function"==typeof this._callback&&(this._callback(e,this.state.scope_list),this._callback=void 0),this.setState({show:!1})},_checkboxChange:function(e){var t=this,a=this.state.scope_list;return function(){a[e].checked=!a[e].checked,t.setState({scope_list:a})}},render:function(){if(!this.state.lazyLoaded)return null;for(var a=this.state.scope_list,i=[],s=0;s<a.length;++s){var o=a[s];if(o.auth_state==l)i.push(e.createElement("li",{key:o.scope},e.createElement("i",{className:"simulator-authorize-dialog-readonly"}),o.desc));else{var c="authorize_checkbox"+s,r=!!o.checked;i.push(e.createElement("li",{key:o.scope},e.createElement("label",{className:"simulator-authorize-dialog-checkbox",htmlFor:c},e.createElement("input",{id:c,type:"checkbox",checked:r,onChange:this._checkboxChange(s)}),e.createElement("i",null)),e.createElement("span",{onClick:this._checkboxChange(s)},o.desc)))}}return e.createElement("div",{style:this.state.show?{}:t.displayNone,className:"simulator-authorize-dialog-wrapper"},e.createElement("div",{className:"simulator-authorize-dialog-mask"}),e.createElement("div",{className:"simulator-authorize-dialog"},e.createElement("div",{className:"simulator-authorize-dialog-hd"},e.createElement("h3",{className:"simulator-authorize-dialog-title"},"微信授权")),e.createElement("div",{className:"simulator-authorize-dialog-bd"},e.createElement("img",{className:"simulator-authorize-dialog-logo",width:"100",src:this.state.appicon_url}),e.createElement("p",{className:"simulator-authorize-dialog-tips"},this.state.appname," 申请获得以下权限："),e.createElement("ul",{className:"simulator-authorize-dialog-list"},i)),e.createElement("div",{className:"simulator-authorize-dialog-ft"},e.createElement("a",{href:"javascript:;",onClick:this.handleOnAllow},"允许"),e.createElement("a",{href:"javascript:;",onClick:this.handleOnCancel},"拒绝"))))}});_exports=s}var _exports;init(),module.exports=_exports;