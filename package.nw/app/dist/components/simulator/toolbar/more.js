"use strict";function init(){var t=require("../../../lib/react.js"),e=require("../../setting/common/settingFooter.js"),a=require("../../../stores/webviewStores.js"),i=require("../../../actions/windowActions.js"),s=require("../../../stores/windowStores.js"),o=require("../../../cssStr/cssStr.js"),n=t.createClass({displayName:"More",getInitialState:function(){return this._getInitState()},componentDidMount:function(){s.on("CLICK_TOOLSBAR",this._clickToolbar),s.on("BODY_CLICK",this._clickToolbar)},componentWillUnmount:function(){s.removeListener("CLICK_TOOLSBAR",this._clickToolbar),s.removeListener("BODY_CLICK",this._clickToolbar)},render:function(){var a=this,i=0,n=!1,r=this.state.isStatusHeightValid?o.displayNone:{};r.color="red";var l=s.getWebviewInfo();"Android"===l.os&&(n=!0,i++);var c=this.state.show?{}:o.displayNone,u=i>0;return t.createElement("div",{className:"simulator-toolbar-model simulator-toolbar-model-more",style:u?{}:o.displayNone,onClick:this.handleOnMoreIconClick},t.createElement("p",null,"•••"),t.createElement("div",{className:"simulator-toolbar-more-wrapper",style:c,onClick:this.handleOnMoreContentClick},t.createElement("div",{className:"simulator-toolbar-more-option",style:n?{}:o.displayNone},t.createElement("div",{className:"simulator-toolbar-more-option-line"},t.createElement("p",{className:"simulator-toolbar-more-option-name"},"状态栏高度"),t.createElement("div",{className:"simulator-toolbar-more-option-value"},t.createElement("input",{type:"number",className:"ui-input-minimal",min:0,max:50,value:this.state.statusbarHeight,onChange:function(t){return a.onStatusInputChange(t)}}))),t.createElement("p",{className:"ui-input-footnote"},"只适用于 Android，Android 状态栏高度默认 25dp，iOS 状态栏高度固定 20dp，请在此填写您的 Android 测试机型的状态栏高度"),t.createElement("p",{className:"ui-input-error-tips",style:r},t.createElement("i",{className:"fa fa-exclamation-circle fa-2 icon","aria-hidden":"true"}),"状态栏高度必须大于 0 小于 50")),t.createElement(e,{save:this.handleSave,cancel:this.handleCancel,restoreDefault:this.handleRestoreDefault})))},onStatusInputChange:function(t){var e=t.target.value,a=!0;e.startsWith("0")&&(a=!1),e=parseInt(e),Number.isNaN(e)?a=!1:(e<0||e>50)&&(a=!1),this.setState({statusbarHeight:t.target.value,isStatusHeightValid:a})},handleOnMoreContentClick:function(t){t.stopPropagation()},handleOnMoreIconClick:function(t){t.stopPropagation();var e=!this.state.show;this.setState({show:e}),i.clickToolsbar("more")},handleSave:function(){this.state.isStatusHeightValid&&(a.setStatusBarHeight(this.state.statusbarHeight),this._clickToolbar())},handleCancel:function(){this._reset(),this._clickToolbar()},handleRestoreDefault:function(){this.setState({statusbarHeight:25,isStatusHeightValid:!0})},_clickToolbar:function(t){"more"!=t&&this.setState({show:!1})},_reset:function(){this.setState(this._getInitState())},_getInitState:function(){return{show:!1,statusbarHeight:a.getStatusBarHeight(),isStatusHeightValid:!0}}});_exports=n}var _exports;init(),module.exports=_exports;