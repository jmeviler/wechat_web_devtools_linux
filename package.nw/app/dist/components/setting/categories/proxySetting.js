"use strict";function init(){var t=require("../../../lib/react.js"),e=(require("../../../cssStr/cssStr.js"),require("../../../config/config.js"),require("../../../stores/windowStores.js")),s=require("../../../actions/windowActions.js"),r=(require("../../../actions/webviewActions.js"),require("../../../common/request/request.js"),4),o=t.createClass({displayName:"ProxySetting",getInitialState:function(){var t=e.getSetting();return t?t:{lazyLoaded:!1,proxyType:"SYSTEM",currentProxyType:"SYSTEM",proxyHost:"",currentProxyHost:"",proxyPort:"",currentProxyPort:""}},changeProxy:function(t){var e=t.currentTarget,s=e.dataset,r=s.type,o=void 0;o="USER"!==r?r:"PROXY "+this.state.proxyHost+":"+this.state.proxyPort,this.setState({proxyType:o})},changeProxyHost:function(t){var e=t.target.value,s=this.state.proxyPort||"80",r="PROXY "+e+":"+s;this.setState({proxyType:r,proxyHost:e})},changeProxyPort:function(t){var e=t.target.value,s=this.state.proxyHost,r="PROXY "+s+":"+e;this.setState({proxyType:r,proxyPort:e})},cancel:function(){this.setState({version:this.state.currentVersion,proxyType:this.state.currentProxyType,proxyPort:this.state.currentProxyPort,proxyHost:this.state.currentProxyHost})},save:function(){var t=this,e=function(){t.setState({currentProxyType:t.state.proxyType,currentVersion:t.state.version,currentDevice:t.state.device},function(){s.saveSetting(Object.assign({},t.state))})};this.state.currentProxyType!==this.state.proxyType?s.updataProxySetting(this.state.proxyType,function(){setTimeout(function(){e()})}):e()},restoreDefault:function(){this.setState({proxyType:"SYSTEM"})},componentWillReceiveProps:function(t){t.show&&this.setState({lazyLoaded:!0})},componentDidMount:function(){},render:function(){var e=this;if(!this.state.lazyLoaded||!this.props.show)return null;var s=(this.props.show?"setting-show":"setting","iOS"===this.state.os?"setting-form-select-item setting-form-select-item-selected":"setting-form-select-item","Android"===this.state.os?"setting-form-select-item setting-form-select-item-selected":"setting-form-select-item",Object.assign([],this.state.versionList)),o=s.findIndex(function(t){return t===e.state.version});o>=r&&(s.splice(o,1),s.unshift(this.state.version));var i="SYSTEM"!==this.state.proxyType&&"DIRECT"!==this.state.proxyType;return t.createElement("div",{className:"setting-sections"},t.createElement("div",{className:"setting-section"},t.createElement("div",{className:"setting-bd"},t.createElement("div",{className:"setting-section-title"},"代理"),t.createElement("div",{className:"setting-form-bd"},t.createElement("label",{htmlFor:"noProxy",className:"setting-form-option"},t.createElement("input",{onChange:this.changeProxy,checked:"DIRECT"===this.state.proxyType,"data-type":"DIRECT",type:"radio",name:"proxy",id:"noProxy"}),t.createElement("i",{className:"setting-form-radio"}),"不使用任何代理，勾选后直连网络"),t.createElement("label",{htmlFor:"systemProxy",className:"setting-form-option"},t.createElement("input",{onChange:this.changeProxy,checked:"SYSTEM"===this.state.proxyType,"data-type":"SYSTEM",type:"radio",name:"proxy",id:"systemProxy"}),t.createElement("i",{className:"setting-form-radio"}),"使用系统代理"),t.createElement("label",{htmlFor:"manuallyProxy",className:"setting-form-option"},t.createElement("input",{onChange:this.changeProxy,checked:i,"data-type":"USER",type:"radio",name:"proxy",id:"manuallyProxy"}),t.createElement("i",{className:"setting-form-radio"}),"手动设置代理"),t.createElement("div",{className:"setting-form-proxy-area"},t.createElement("input",{disabled:!i,onChange:this.changeProxyHost,value:this.state.proxyHost,type:"text",className:"setting-form-proxy-address",placeholder:"请填写代理地址"}),t.createElement("input",{disabled:!i,onChange:this.changeProxyPort,value:this.state.proxyPort,type:"number",className:"setting-form-proxy-port",placeholder:"请填写端口"}))))))}});_exports=o}var _exports;init(),module.exports=_exports;