"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function init(){var t={"⇧":"Shift",shift:"Shift",Shift:"Shift",shiftleft:"ShiftLeft",ShiftLeft:"ShiftLeft",shiftright:"ShiftRight",ShiftRight:"ShiftRight","⌥":"Alt",alt:"Alt",Alt:"Alt",altleft:"AltLeft",AltLeft:"AltLeft",altright:"AltRight",AltRight:"AltRight",option:"Alt",Option:"Alt",optionleft:"AltLeft",OptionLeft:"AltLeft",optionright:"AltRight",OptionRight:"AltRight",opt:"Alt",Opt:"Alt",optleft:"AltLeft",OptLeft:"AltLeft",optright:"AltRight",OptRight:"AltRight","⌃":"Control",ctrl:"Control",Ctrl:"Control",control:"Control",Control:"Control",ctrlleft:"ControlLeft",CtrlLeft:"ControlLeft",ctrlright:"ControlRight",CtrlRight:"ControlRight",controlleft:"ControlLeft",ControlLeft:"ControlLeft",controlright:"ControlRight",ControlRight:"ControlRight","⌘":"Meta",command:"Meta",cmd:"Meta",Command:"Meta",Cmd:"Meta",meta:"Meta",Meta:"Meta",cmdleft:"MetaLeft",CmdLeft:"MetaLeft",cmdright:"MetaRight",CmdRight:"MetaRight",commandleft:"MetaLeft",CommandLeft:"MetaLeft",commandright:"MetaRight",CommandRight:"MetaRight",metaleft:"MetaLeft",MetaLeft:"MetaLeft",metaright:"MetaRight",MetaRight:"MetaRight"},e={backspace:"Backspace",Backspacee:"Backspace",tab:"Tab",Tab:"Tab",clear:"Clear",Clear:"Clear",enter:"Enter",Enter:"Enter",return:"Enter",Return:"Enter",esc:"Escape",Esc:"Escape",escape:"Escape",Escape:"Escape",space:" ",Space:" ",left:"ArrowLeft",Left:"ArrowLeft","←":"ArrowLeft",ArrowLeft:"ArrowLeft",up:"ArrowUp",Up:"ArrowUp","↑":"ArrowUp",ArrowUp:"ArrowUp",right:"ArrowRight",Right:"ArrowRight","→":"ArrowRight",ArrowRight:"ArrowRight",down:"ArrowDown",Down:"ArrowDown","↓":"ArrowDown",ArrowDown:"ArrowDown",del:"Delete",delete:"Delete",Del:"Delete",Delete:"Delete",home:"Home",end:"End",Home:"Home",End:"End",pageup:"PageUp",pagedown:"PageDown",PageUp:"PageUp",PageDown:"PageDown",backquote:"Backquote",Backquote:"Backquote",",":"Comma","<":"Comma",".":"Period",">":"Period","/":"Slash","?":"Slash",";":"Semicolon",":":"Semicolon","'":"Quote",'"':"Quote","[":"BracketLeft","{":"BracketLeft","]":"BracketRight","}":"BracketRight","\\":"Backslash","|":"Backslash","-":"Minus",_:"Minus","=":"Equal","+":"Equal",0:"Digit0",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9",a:"KeyA",A:"KeyA",b:"KeyB",B:"KeyB",c:"KeyC",C:"KeyC",D:"KeyD",d:"KeyD",e:"KeyE",E:"KeyE",F:"KeyF",f:"KeyF",F1:"F1",f1:"F1",F10:"F10",f10:"F10",F11:"F11",f11:"F11",F12:"F12",f12:"F12",f2:"F2",F2:"F2",f3:"F3",F3:"F3",f4:"F4",F4:"F4",f5:"F5",F5:"F5",F6:"F6",f6:"F6",F7:"F7",f7:"F7",F8:"F8",f8:"F8",F9:"F9",f9:"F9",g:"KeyG",G:"KeyG",h:"KeyH",H:"KeyH",i:"KeyI",I:"KeyI",j:"KeyJ",J:"KeyJ",k:"KeyK",K:"KeyK",L:"KeyL",l:"KeyL",M:"KeyM",m:"KeyM",N:"KeyN",n:"KeyN",o:"KeyO",O:"KeyO",p:"KeyP",P:"KeyP",q:"KeyQ",Q:"KeyQ",r:"KeyR",R:"KeyR",s:"KeyS",S:"KeyS",T:"KeyT",t:"KeyT",U:"KeyU",u:"KeyU",v:"KeyV",V:"KeyV",W:"KeyW",w:"KeyW",X:"KeyX",x:"KeyX",Y:"KeyY",y:"KeyY",z:"KeyZ",Z:"KeyZ"},o=function(){function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,o),t||(t=window.document),!t.addEventListener)throw new Error("Shortcut.js: constructor must be provided with 0 argument or 1 DOM element");t.addEventListener("keydown",this._onKeyDown.bind(this)),t.addEventListener("keyup",this._onKeyUp.bind(this)),window.addEventListener("focuse",this._onWindowFocus.bind(this)),this._handlers={},this._downKeys={},this._mods={ShiftLeft:!1,ShiftRight:!1,AltLeft:!1,AltRight:!1,ControlLeft:!1,ControlRight:!1,MetaLeft:!1,MetaRight:!1},this.options={cancelBubbleAll:!!e.cancelBubbleAll&&e.cancelBubbleAll,cancelBubbleShortcut:!!e.cancelBubbleShortcut&&e.cancelBubbleShortcut}}return _createClass(o,[{key:"add",value:function(t,e){t=this._getKeys(t);for(var o=void 0,i=void 0,n=void 0,r=0;r<t.length;r++)o=[],n=t[r].split("+"),n.length>1?(o=this._getMods(n),i=this._getCode(n[n.length-1])):i=this._getCode(t[r]),this._handlers[i]||(this._handlers[i]=[]),this._handlers[i].push({shortcut:t[r],handler:e,code:i,mods:o})}},{key:"remove",value:function(t){t=this._getKeys(t);for(var e=void 0,o=void 0,i=0;i<t.length;i++)if(o=t[i].split("+"),e=o.length>1?this._getCode(o[o.length-1]):this._getCode(t[i]),this._handlers[e]){var n=this._handlers[e],r=[],l=!0,a=!1,h=void 0;try{for(var s,c=n[Symbol.iterator]();!(l=(s=c.next()).done);l=!0){var f=s.value;f.shortcut!=t[i]&&r.push(f)}}catch(t){a=!0,h=t}finally{try{!l&&c.return&&c.return()}finally{if(a)throw h}}this._handlers[e]=n}}},{key:"removeAll",value:function(){this._handlers=[]}},{key:"isPressed",value:function(t){return!!this._downKeys(this._getCode(t))}},{key:"_dispatch",value:function(e){var o=e.code;if(this._downKeys[o]||(this._downKeys[o]=!0),o in t)return void this._onModDown(o);if(o in this._handlers)for(var i=0;i<this._handlers[o].length;i++){var n=this._handlers[o][i],r=!1,l=n.mods.main;for(var a in l)if(l[a]!==e[a]){r=!0;break}r||e.cancelBubbleShortcut||(n.handler(e),this.options.cancelBubbleAll?e.cancelBubble=!0:this.options.cancelBubbleShortcut&&(e.cancelBubbleShortcut=!0))}}},{key:"_onKeyDown",value:function(t){this._dispatch(t)}},{key:"_onKeyUp",value:function(e){var o=e.code;this._downKeys[o]&&(this._downKeys[o]=!1),o in t&&this._onModUp(o)}},{key:"_onWindowFocus",value:function(t){for(var e in this._mods)this._mods[e]=!1}},{key:"_getKeys",value:function(t){var e=void 0;return t=t.replace(/\s/g,""),e=t.split(","),""==e[e.length-1]&&e.pop(),e}},{key:"_getMods",value:function(e){for(var o=e.slice(0,e.length-1),i={},n={},r=0;r<o.length;r++)i[t[o[r]]]=!0;return n={main:{ctrlKey:!!i.Control,altKey:!!i.Alt,metaKey:!!i.Meta,shiftKey:!!i.Shift}}}},{key:"_getCode",value:function(o){return e[o]||t[o]}},{key:"_onModDown",value:function(t){t.match(/(.+)(Left|Right)$/)&&(this._mods[t]=!0)}},{key:"_onModUp",value:function(t){t.match(/(.+)(Left|Right)$/)&&(this._mods[t]=!1)}}]),o}();_exports=o}var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),_exports;init(),module.exports=_exports;