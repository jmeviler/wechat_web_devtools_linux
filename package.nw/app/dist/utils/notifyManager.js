"use strict";function init(){var t=require("../actions/windowActions.js"),i=2592e6,o=!1,e=function(i){i>0&&t.toggleNewFeatureCheckShowStatus(!0)},n=function(t,i){0===i&&nw.Shell.openExternal(t)};_exports={checkCouldNotify:function(t){var o={};try{o=JSON.parse(localStorage.getItem("notice_show_info"))||{}}catch(t){log.error("notifications.js checkCouldNotify notice_show_info from localStorage JSON.parse error"),localStorage.setItem("notice_show_info","{}")}var e={},n=Date.now();for(var r in o)n-o[r]<i&&(e[r]=o[r]);return e[t.id]=n,localStorage.setItem("notice_show_info",JSON.stringify(e)),!o[t.id]},handleNotificationList:function(t){for(var i=0;i<t.length;i++)this.handleNotification(t[i])},handleNotification:function(t){if(this.checkCouldNotify(t)){var i=!1;(2==t.type||3==t.type||t.attr&&t.attr.requireInteraction)&&(i=!0);var o={title:t.title,message:t.content,priority:Math.min(t.type,2),requireInteraction:i},r=function(){};2==t.type?(o.buttons=[{title:t.attr&&t.attr.cancelText||"取消"},{title:t.attr&&t.attr.confirmText||"前往设置"}],r=e):3==t.type&&(o.buttons=[{title:t.attr&&t.attr.confirmText||"查看详情"}],r=n.bind(this,t.attr&&t.attr.link)),this.notifications(o,r)}},notifications:function(t,i){var e=(+new Date).toString();i=i||function(){};var n={type:"basic",iconUrl:"app/images/logo.png",priority:2,requireInteraction:!0};return t=Object.assign(n,t),o||(o={},chrome.notifications.onButtonClicked.addListener(function(t,i){o[t]&&(o[t](i),chrome.notifications.clear(t))})),o[e]=i,chrome.notifications.create(e,t),e}}}var _exports;init(),module.exports=_exports;