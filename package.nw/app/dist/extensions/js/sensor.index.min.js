!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var n in a)("object"==typeof exports?exports:e)[n]=a[n]}}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}({0:function(e,t,a){"use strict";function n(){var e=N.checked;e?(y.removeAttribute("disabled"),b.removeAttribute("disabled"),f.removeAttribute("disabled"),g.removeAttribute("disabled"),E.removeAttribute("disabled"),_.removeAttribute("disabled"),x.removeAttribute("disabled")):(y.setAttribute("disabled",!0),b.setAttribute("disabled",!0),f.setAttribute("disabled",!0),g.setAttribute("disabled",!0),E.setAttribute("disabled",!0),_.setAttribute("disabled",!0),x.setAttribute("disabled",!0)),i()}function i(){var e=parseFloat(b.value),t=parseFloat(y.value),a=parseFloat(f.value),n=parseFloat(g.value),i=parseFloat(E.value),r=parseFloat(_.value),s=parseFloat(x.value);prompt("____sdk____"+JSON.stringify({command:"SET_GEO_SETTING",geoSetting:{checked:N.checked,longitude:e,latitude:t,speed:a,accuracy:n,altitude:i,verticalAccuracy:r,horizontalAccuracy:s}}))}var r=document.getElementById("controller"),s=new Date,l=a(82),o=document.getElementById("x"),c=document.getElementById("y"),d=document.getElementById("z"),u=document.getElementById("reset"),v=!1;u.addEventListener("click",function(e){r.contentWindow.postMessage(JSON.stringify({action:"restart"}),"*")});var h=navigator.userAgent,m=h.match(/chromeRuntimeID\/(.*)\s?/)[1],p=chrome.runtime.connect(m,{name:"sensor"});p.onMessage.addListener(function(e){var t=e.command,a=e.msg;"SHAKE_HANDS"===t?p.postMessage({data:{},command:"GET_SENSOR_STATUS"}):"SET_SENSOR_STATUS"===t&&(v=a.accelerometer)}),window.addEventListener("message",function(e){var t=e.data;if("registerExtension"!==t){var a=void 0;try{a=JSON.parse(e.data)}catch(n){console.error("sensor/js/main.js Cannot parse "+e.data),a={}}var i=a.action;if("connect"===i)r.contentWindow.postMessage(JSON.stringify({action:"start"}),"*");else if("newData"===i){var u=new Date;if(u-s<200)return;s=new Date;var h=a.data,m=h.alpha,p=h.beta,y=h.gamma;h.roll;l.setEulerAngles({alpha:m,beta:p,gamma:y});var b=l.accelX,f=l.accelY,g=l.accelZ;o.value=parseFloat(b.toFixed(5)),c.value=parseFloat(f.toFixed(5)),d.value=parseFloat(g.toFixed(5)),v&&chrome.devtools.inspectedWindow.eval("window.DeviceOrientation("+o.value+", "+c.value+", "+d.value+")",function(e,t){})}}}),r.src="./controller/index.html";var y=document.getElementById("latitude"),b=document.getElementById("longitude"),f=document.getElementById("speed"),g=document.getElementById("accuracy"),E=document.getElementById("altitude"),_=document.getElementById("verticalAccuracy"),x=document.getElementById("horizontalAccuracy"),N=document.getElementById("enableGeo");y.addEventListener("change",function(e){var t=parseFloat(y.value);t>90?y.value=90:t<-90?y.value=-90:Number.isNaN(t)&&(y.value=0)}),b.addEventListener("change",function(e){var t=parseFloat(b.value);t>180?b.value=180:t<-180?b.value=-180:Number.isNaN(t)&&(b.value=0)}),f.addEventListener("change",function(e){var t=parseFloat(f.value);t<-1?f.value=-1:Number.isNaN(t)&&(f.value=-1)}),g.addEventListener("change",function(e){var t=parseFloat(g.value);t<0?g.value=0:t>100?g.value=100:Number.isNaN(t)&&(g.value=0)}),E.addEventListener("change",function(e){var t=parseFloat(E.value);Number.isNaN(t)&&(E.value=0)}),_.addEventListener("change",function(e){var t=parseFloat(_.value);t<0?_.value=0:Number.isNaN(t)&&(_.value=0)}),x.addEventListener("change",function(e){var t=parseFloat(x.value);t<0?x.value=0:Number.isNaN(t)&&(x.value=0)}),N.addEventListener("change",n),y.addEventListener("blur",i),b.addEventListener("blur",i),f.addEventListener("blur",i),g.addEventListener("blur",i),E.addEventListener("blur",i),_.addEventListener("blur",i),x.addEventListener("blur",i);var A=JSON.parse(prompt("____sdk____"+JSON.stringify({command:"GET_GEO_SETTING"})));N.checked=A.checked,y.value=A.latitude||0,b.value=A.longitude||0,f.value=A.speed||-1,g.value=A.accuracy||65,E.value=A.altitude||0,_.value=A.verticalAccuracy||65,x.value=A.horizontalAccuracy||65,n()},82:function(e,t,a){"use strict";var n=a(83),i={accelX:0,accelY:0,accelZ:0,setEulerAngles:function(e){var t=e.alpha,a=e.beta,i=e.gamma,r={yaw:t<=180?-t:360-t,pitch:-a,roll:i};n.reverseRollPitchYaw(r),this.accelX=n.x,this.accelY=n.y,this.accelZ=n.z}};e.exports=i},83:function(e,t){"use strict";var a={x:0,y:0,z:-1,_toRadians:function(e){return e*Math.PI/180},_yaw:function(e){var t=this._toRadians(e),a=Math.cos(t),n=Math.sin(t),i={x:a*this.x+n*this.y,y:-n*this.x+a*this.y,z:this.z};this.x=i.x,this.y=i.y,this.z=i.z},_pitch:function(e){var t=this._toRadians(e),a=Math.cos(t),n=Math.sin(t),i={x:this.x,y:a*this.y+n*this.z,z:-n*this.y+a*this.z};this.x=i.x,this.y=i.y,this.z=i.z},_roll:function(e){var t=this._toRadians(e),a=Math.cos(t),n=Math.sin(t),i={x:a*this.x+n*this.z,y:this.y,z:-n*this.x+a*this.z};this.x=i.x,this.y=i.y,this.z=i.z},reverseRollPitchYaw:function(e){this.x=0,this.y=0,this.z=-1,this._yaw(-e.yaw),this._pitch(-e.pitch),this._roll(-e.roll)}};e.exports=a}})});