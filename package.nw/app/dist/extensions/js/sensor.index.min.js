!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var n in a)("object"==typeof exports?exports:e)[n]=a[n]}}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}({0:function(e,t,a){"use strict";function n(){var e=_.checked;e?(p.removeAttribute("disabled"),y.removeAttribute("disabled")):(p.setAttribute("disabled",!0),y.setAttribute("disabled",!0)),i()}function i(){var e=parseFloat(y.value),t=parseFloat(p.value);prompt("____sdk____"+JSON.stringify({command:"SET_GEO_SETTING",geoSetting:{checked:_.checked,longitude:e,latitude:t}}))}var s=document.getElementById("controller"),o=new Date,r=a(82),c=document.getElementById("x"),l=document.getElementById("y"),d=document.getElementById("z"),u=document.getElementById("reset"),h=!1;u.addEventListener("click",function(e){s.contentWindow.postMessage(JSON.stringify({action:"restart"}),"*")});var v=navigator.userAgent,m=v.match(/chromeRuntimeID\/(.*)\s?/)[1],f=chrome.runtime.connect(m,{name:"sensor"});f.onMessage.addListener(function(e){var t=e.command,a=e.msg;"SHAKE_HANDS"===t?f.postMessage({data:{},command:"GET_SENSOR_STATUS"}):"SET_SENSOR_STATUS"===t&&(h=a.accelerometer)}),window.addEventListener("message",function(e){var t=(e.data,void 0);try{t=JSON.parse(e.data)}catch(a){}var n=t.action;if("connect"===n)s.contentWindow.postMessage(JSON.stringify({action:"start"}),"*");else if("newData"===n){var i=new Date;if(i-o<200)return;o=new Date;var u=t.data,v=u.alpha,m=u.beta,f=u.gamma;u.roll;r.setEulerAngles({alpha:v,beta:m,gamma:f});var p=r.accelX,y=r.accelY,_=r.accelZ;c.value=parseFloat(p.toFixed(5)),l.value=parseFloat(y.toFixed(5)),d.value=parseFloat(_.toFixed(5)),h&&chrome.devtools.inspectedWindow.eval("window.DeviceOrientation("+c.value+", "+l.value+", "+d.value+")",function(e,t){})}}),s.src="./controller/index.html";var p=document.getElementById("latitude"),y=document.getElementById("longitude"),_=document.getElementById("enableGeo");p.addEventListener("change",function(e){var t=parseFloat(p.value);t>90&&(p.value=90),t<-90&&(p.value=-90)}),y.addEventListener("change",function(e){var t=parseFloat(y.value);t>180&&(y.value=180),t<-180&&(y.value=-180)}),_.addEventListener("change",n),p.addEventListener("blur",i),y.addEventListener("blur",i);var g=JSON.parse(prompt("____sdk____"+JSON.stringify({command:"GET_GEO_SETTING"})));_.checked=g.checked,p.value=g.latitude||0,y.value=g.longitude||0,n()},82:function(e,t,a){"use strict";var n=a(83),i={accelX:0,accelY:0,accelZ:0,setEulerAngles:function(e){var t=e.alpha,a=e.beta,i=e.gamma,s={yaw:t<=180?-t:360-t,pitch:-a,roll:i};n.reverseRollPitchYaw(s),this.accelX=n.x,this.accelY=n.y,this.accelZ=n.z}};e.exports=i},83:function(e,t){"use strict";var a={x:0,y:0,z:-1,_toRadians:function(e){return e*Math.PI/180},_yaw:function(e){var t=this._toRadians(e),a=Math.cos(t),n=Math.sin(t),i={x:a*this.x+n*this.y,y:-n*this.x+a*this.y,z:this.z};this.x=i.x,this.y=i.y,this.z=i.z},_pitch:function(e){var t=this._toRadians(e),a=Math.cos(t),n=Math.sin(t),i={x:this.x,y:a*this.y+n*this.z,z:-n*this.y+a*this.z};this.x=i.x,this.y=i.y,this.z=i.z},_roll:function(e){var t=this._toRadians(e),a=Math.cos(t),n=Math.sin(t),i={x:a*this.x+n*this.z,y:this.y,z:-n*this.x+a*this.z};this.x=i.x,this.y=i.y,this.z=i.z},reverseRollPitchYaw:function(e){this.x=0,this.y=0,this.z=-1,this._yaw(-e.yaw),this._pitch(-e.pitch),this._roll(-e.roll)}};e.exports=a}})});