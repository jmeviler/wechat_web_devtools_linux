"use strict";var _exports;module.exports=function(){var e=require("../../config/urlConfig.js"),r=require("../request/request.js"),i=require("../log/log.js"),n=require("../../utils/newReport.js"),o=require("../../utils/checkUp.js"),t=require("../../stores/configStores.js");if(i.info("init.js loadinit begin"),!global.appConfig.isDev){var s=function(e,r){try{var o=r.filename,t=r.error.stack;i.error("filename: "+o+", msg: "+t),n(e,"","filename: "+o+", msg: "+t)}catch(e){}};window.addEventListener("error",function(e){s("tool_error_nw",e)}),global.contentWindow.addEventListener("error",function(e){s("tool_error_web",e)})}var a={type:7,version:global.appVersion};r({method:"post",url:e.LOADCONFIG_URL,body:JSON.stringify(a),needToken:-1},function(e,r,n){if(e)i.info("init.js loadinit error: "+JSON.stringify(e));else{i.info("init.js loadinit end: "+n);var s=JSON.parse(n),a=s.cgi_list,l={};a.forEach(function(e){l[e.name]=e.url}),localStorage.setItem("urlConfig",JSON.stringify(l));var f=s.client_list,c={};f.forEach(function(e){c[e.key]=e.value});var u=c.scene;if(u)try{u=JSON.parse(u),t.setSceneConfig(u)}catch(e){}o(c)}})};