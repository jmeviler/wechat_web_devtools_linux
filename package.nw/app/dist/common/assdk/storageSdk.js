"use strict";function init(){function e(e,t,a){p.setProjectLocalStorage(t,a),f.upASData(e,a)}function t(e,t,a){var r=e.apphash,o=p.getProjectLocalStorage(r),g=a?"getStorageSync":"getStorage",n=e.args,i=n.key,c=o[i],s=void 0;s=void 0!==c?{errMsg:g+":ok",data:c.data,dataType:c.dataType}:{errMsg:g+":fail data not found"},t(s)}function a(t,a,r){var o=t.appid,g=t.apphash,n=p.getProjectLocalStorage(g),i=r?"setStorageSync":"setStorage",c=t.args,s=c.key,S=c.data,f=c.dataType;n[s]={data:S,dataType:f};var y=p.getProjectConfig({hash:g}),d=y?y.Setting.MaxLocalstorageSize:u;JSON.stringify(n).length>1024*d*1024?a({errMsg:i+":fail exceed storage max size "+d+"Mb;"}):(e(o,g,n),a({errMsg:i+":ok"}))}function r(t,a,r){var o=t.appid,g=t.apphash;e(o,g,{}),a({errMsg:r?"clearStorageSync:ok":"clearStorage:ok"})}function o(t,a,r){var o=t.appid,g=t.apphash,n=p.getProjectLocalStorage(g),i=t.args,c=i.key;delete n[c],e(o,g,n),a({errMsg:r?"removeStorageSync:ok":"removeStorage:ok"})}function g(e,t,a){var r=e.apphash,o=p.getProjectLocalStorage(r),g={};g.keys=Object.keys(o),g.currentSize=Math.ceil(JSON.stringify(o).length/1024);var n=p.getProjectConfig({hash:r}),i=n?n.Setting.MaxLocalstorageSize:u;g.limitSize=1024*i,g.errMsg=a?"getStorageInfoSync:ok":"getStorageInfo:ok",t(g)}function n(e,t){g(e,t,!0)}function i(e,t){o(e,t,!0)}function c(e,t){r(e,t,!0)}function s(e,a){t(e,a,!0)}function S(e,t){a(e,t,!0)}var p=(require("fs"),require("path"),require("../../stores/windowStores.js"),require("../../stores/projectStores.js")),f=require("../../actions/webviewActions.js"),u=10;_exports={getStorage:t,clearStorage:r,setStorage:a,removeStorage:o,getStorageInfo:g,getStorageSync:s,setStorageSync:S,clearStorageSync:c,removeStorageSync:i,getStorageInfoSync:n}}var _exports;init(),module.exports=_exports;