"use strict";function init(){function t(t){var o=i.getGeoSetting();return o.checked?void t(null,{statusCode:200},JSON.stringify({status:0,result:{location:{lat:o.latitude,lng:o.longitude,speed:o.speed,accuracy:o.accuracy,altitude:o.altitude,verticalAccuracy:o.verticalAccuracy,horizontalAccuracy:o.horizontalAccuracy}},from:"Setting"})):void 0!==p&&void 0!==y?void t(null,{statusCode:200},JSON.stringify({status:0,result:{location:{lat:p,lng:y,speed:v,accuracy:g,altitude:h,verticalAccuracy:f,horizontalAccuracy:m}}})):void a({url:s+"?key="+n,needToken:-1},t)}function o(o,e){t(function(t,o,r){var a={};t||200!==o.statusCode||(r=JSON.parse(r),0==r.status&&("Setting"!==r.from&&(p=r.result.location.lat,y=r.result.location.lng,v=-1,g=65,h=0,f=65,m=65),a={latitude:r.result.location.lat,longitude:r.result.location.lng,speed:r.result.location.hasOwnProperty("speed")?r.result.location.speed:-1,accuracy:r.result.location.hasOwnProperty("accuracy")?r.result.location.accuracy:65,altitude:r.result.location.hasOwnProperty("altitude")?r.result.location.altitude:0,verticalAccuracy:r.result.location.hasOwnProperty("verticalAccuracy")?r.result.location.verticalAccuracy:65,horizontalAccuracy:r.result.location.hasOwnProperty("horizontalAccuracy")?r.result.location.horizontalAccuracy:65},a.errMsg="getLocation:ok")),a.errMsg||(a.errMsg="getLocation:fail timeout"),e(a)})}function e(t,o){var e=t.args,r=e.latitude,a=e.longitude,i="marker=coord:"+r+","+a;i+=";title:"+encodeURIComponent(e.name||" "),i+=";addr:"+encodeURIComponent(e.address||" "),t.url=u+"?type=0&"+i+"&key="+n+"&referer="+l,c.sendASSDK("openLocation",t,o)}function r(o,e){A&&e({errMsg:"chooseLocation:fail already invoke"}),A=!0,t(function(t,r,a){if(!t&&200===r.statusCode&&(a=JSON.parse(a),0==a.status)){var i=a.result.location.lat,s=a.result.location.lng;return o.url=d+"?search=1&type=1&coord="+i+","+s+"&key="+n+"&referer="+l,void c.sendASSDK("chooseLocation",o,function(t){A=!1,e(t)})}e({errMsg:"chooseLocation:fail timeout"}),A=!1})}var a=require("../request/request.js"),c=require("../../actions/webviewActions.js"),i=require("../../stores/webviewStores.js"),n="JMRBZ-R4HCD-X674O-PXLN4-B7CLH-42BSB",l="wxdevtools",s="http://apis.map.qq.com/ws/location/v1/ip",u="http://apis.map.qq.com/tools/poimarker",d="http://apis.map.qq.com/tools/locpicker",p=void 0,y=void 0,v=void 0,g=void 0,h=void 0,f=void 0,m=void 0,A=!1;_exports={getLocation:o,openLocation:e,chooseLocation:r}}var _exports;init(),module.exports=_exports;