"use strict";function init(){function e(e){var t=document.createElement("input");t.style.display="none",t.setAttribute("type","file"),t.setAttribute("accept","image/*"),global.contentDocumentBody.appendChild(t),t.addEventListener("change",function(r){e.sucCall&&e.sucCall(t.value),global.contentDocumentBody.removeChild(t)}),t.addEventListener("cancel",function(r){e.cancelCall&&e.cancelCall(r),global.contentDocumentBody.removeChild(t)}),t.click()}function t(t,s){var i=t.appid,l=t.ext_appid,u=(t.args,r.getCurrentProject()),d=n.getNetworkType();return"none"===d?s({errMsg:"scanCode:fail network is down"}):void e({sucCall:function(e){o({url:c+"?appid="+i+"&ext_appid="+l+"&platform="+(u.platform?1:0),method:"post",body:a.readFileSync(e),needToken:1},function(e,t,r){if(e)return void s({errMsg:"scanCode:fail "+JSON.stringify(e)});try{r=JSON.parse(r)}catch(e){return void s({errMsg:"scanCode:fail "+JSON.stringify(e)})}if(r.result||r.path){var n=r.path?decodeURIComponent(r.path):"";s({errMsg:"scanCode:ok",result:r.result,scanType:r.scan_type,path:n,charSet:r.char_set})}else s({errMsg:"scanCode:fail"})})},cancelCall:function(){s({errMsg:"scanCode:cancel"})}})}var r=(require("../../actions/webviewActions.js"),require("../../stores/projectStores.js")),n=require("../../stores/webviewStores.js"),o=require("../request/request.js"),a=require("fs"),s=require("../../config/urlConfig.js"),c=s.jsDecodeQRCodeURL;_exports={scanCode:t}}var _exports;init(),module.exports=_exports;