"use strict";function init(){function e(e){var t=document.createElement("input");t.style.display="none",t.setAttribute("type","file"),t.setAttribute("accept","image/*"),global.contentDocumentBody.appendChild(t),t.addEventListener("change",function(n){e.sucCall&&e.sucCall(t.value),global.contentDocumentBody.removeChild(t)}),t.addEventListener("cancel",function(n){e.cancelCall&&e.cancelCall(n),global.contentDocumentBody.removeChild(t)}),t.click()}function t(t,a){var i=t.appid,s=t.ext_appid,l=(t.args,n.getCurrentProject());e({sucCall:function(e){r({url:c+"?appid="+i+"&ext_appid="+s+"&platform="+(l.platform?1:0),method:"post",body:o.readFileSync(e),needToken:1},function(e,t,n){if(e)return void a({errMsg:"scanCode:fail "+JSON.stringify(e)});try{n=JSON.parse(n)}catch(e){return void a({errMsg:"scanCode:fail "+JSON.stringify(e)})}if(n.result||n.path){var r=n.path?decodeURIComponent(n.path):"";a({errMsg:"scanCode:ok",result:n.result,scanType:n.scan_type,path:r,charSet:n.char_set})}else a({errMsg:"scanCode:fail"})})},cancelCall:function(){a({errMsg:"scanCode:cancel"})}})}var n=(require("../../actions/webviewActions.js"),require("../../stores/projectStores.js")),r=require("../request/request.js"),o=require("fs"),a=require("../../config/urlConfig.js"),c=a.jsDecodeQRCodeURL;_exports={scanCode:t}}var _exports;init(),module.exports=_exports;