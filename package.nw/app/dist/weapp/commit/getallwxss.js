"use strict";function init(){function r(r,o,u){function a(r,i,e,t){if(i+e.length<=r.length&&r.substr(i,e.length)==e){var f=r.indexOf(t,i);if(f<0&&"*/"==t)throw q+n;return f<0?r.length-i:(f+=t.length,f-i-1)}return 0}function s(r,i,e){var t=i;if(r[i]==e){for(var n=i+1;n<r.length;n++)if("\\"==r[n])n++;else if(r[n]==e)return n-t;throw q+f+e}return 0}function l(r,i){g[++O]=r.id,b[O]=x[i.id],x[i.id]=O,k[r.id]++}function d(r){for(var i=0,t=0;t>=0;)t=r.indexOf(e.sep,i+1),t>=0&&(i=t);return 0==i?e.sep:r.substring(0,i)}function h(r,i){var e,t={dis:0,file:""};if("@import"==r.substr(i,7)){for(var n=i+8;n<r.length;){if(e=a(r,n,"//","\n"))n+=e;else if(e=a(r,n,"/*","*/"))n+=e;else if("'"==r[n]||'"'==r[n])break;n++}if("'"==r[n]||'"'==r[n]){for(e=s(r,n,r[n]);m.indexOf(r[n+1])>=0;)n++;t.file=r.substr(n+1,e-1),t.dis=n+e-i}}return t}function v(r,n){var f;if("undefined"!=typeof w[r])return y[w[r]];w[r]=_++,f={id:w[r],path:r},y.push(f),k[f.id]=0;var o;try{o=i.readFileSync(r,"utf8"),q=r;var u,c=d(r);F[f.id]=!0,C.push(f);for(var p=0;p<o.length;p++)if(u=a(o,p,"//","\n"))p+=u;else if(u=a(o,p,"/*","*/"))p+=u;else if(u=s(o,p,"'"))p+=u;else if(u=s(o,p,'"'))p+=u;else{var g;if(g=h(o,p),g.dis){p+=g.dis;var x;if(x="\\"==g.file[0]||"/"==g.file[0]?v(e.join(n,g.file),n):v(e.join(c,g.file),n),l(f,x),F[x.id])for(var b=e.relative(n,x.path);;){var O=C.pop();if(b=e.relative(n,O.path)+" -> "+b,O.id==x.id)throw t+":\n"+b}}}}catch(r){throw r}return C.pop(),F[f.id]=!1,f}function c(r){var i="."+y[r].path.substring(o.length);j.push(i),k[r]=-1,p--;for(var e=x[r];e;e=b[e]){var t=g[e];k[t]--,0==k[t]&&c(t)}}var p,g=[],x=[],b=[],w=[],y=[],k=[],O=0,_=0,j=[],m="\t\n\r ",q="",C=[],F=[];try{v(r,o),p=_;for(var S=0;S<_;S++)0==k[S]&&c(S);u(null,j)}catch(r){u(r,null)}}var i=require("fs"),e=require("path"),t="Circular dependencies",n=": lack of */",f=": lack of ";_exports=function(i,e,t){r(i,e,function(r,i){t(r,i)})}}var _exports;init(),module.exports=_exports;